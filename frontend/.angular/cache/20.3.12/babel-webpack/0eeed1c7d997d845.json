{"ast":null,"code":"import { CommonModule } from \"@angular/common\";\nimport { RouterModule } from \"@angular/router\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../../services/intercambios.service\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"@angular/common\";\nfunction IntercambiosEnProcesoComponent_div_0_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 3);\n    i0.ɵɵtext(1, \" Cargando intercambios...\\n\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction IntercambiosEnProcesoComponent_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 4);\n    i0.ɵɵtext(1, \" No tienes intercambios en proceso.\\n\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction IntercambiosEnProcesoComponent_div_2_div_1_img_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"img\", 19);\n  }\n  if (rf & 2) {\n    const i_r2 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵproperty(\"src\", i_r2.otro.avatar_url, i0.ɵɵsanitizeUrl);\n  }\n}\nfunction IntercambiosEnProcesoComponent_div_2_div_1_div_19_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 20);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const i_r2 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate1(\" Diferencia propuesta: $\", i_r2.diferencia_monetaria, \" \");\n  }\n}\nfunction IntercambiosEnProcesoComponent_div_2_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r1 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 7)(1, \"div\", 8);\n    i0.ɵɵtemplate(2, IntercambiosEnProcesoComponent_div_2_div_1_img_2_Template, 1, 1, \"img\", 9);\n    i0.ɵɵelementStart(3, \"div\", 10)(4, \"div\", 11);\n    i0.ɵɵtext(5);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"div\", 12);\n    i0.ɵɵtext(7);\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(8, \"div\", 13)(9, \"div\", 14)(10, \"strong\");\n    i0.ɵɵtext(11, \"T\\u00FA ofreces:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(12, \"span\");\n    i0.ɵɵtext(13);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(14, \"div\", 14)(15, \"strong\");\n    i0.ɵɵtext(16, \"T\\u00FA quieres:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(17, \"span\");\n    i0.ɵɵtext(18);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵtemplate(19, IntercambiosEnProcesoComponent_div_2_div_1_div_19_Template, 2, 1, \"div\", 15);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(20, \"div\", 16)(21, \"button\", 17);\n    i0.ɵɵlistener(\"click\", function IntercambiosEnProcesoComponent_div_2_div_1_Template_button_click_21_listener() {\n      const i_r2 = i0.ɵɵrestoreView(_r1).$implicit;\n      const ctx_r2 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r2.verChat(i_r2));\n    });\n    i0.ɵɵtext(22, \"Ver detalles / Chat\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(23, \"button\", 18);\n    i0.ɵɵlistener(\"click\", function IntercambiosEnProcesoComponent_div_2_div_1_Template_button_click_23_listener() {\n      const i_r2 = i0.ɵɵrestoreView(_r1).$implicit;\n      const ctx_r2 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r2.cancelar(i_r2));\n    });\n    i0.ɵɵtext(24, \"Cancelar\");\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const i_r2 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", i_r2.otro == null ? null : i_r2.otro.avatar_url);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(i_r2.otro == null ? null : i_r2.otro.nombre);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"Estado: \", i_r2.estado);\n    i0.ɵɵadvance(6);\n    i0.ɵɵtextInterpolate((i_r2.producto_ofrece == null ? null : i_r2.producto_ofrece.titulo) || \"Solo dinero\");\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate(i_r2.producto_objetivo == null ? null : i_r2.producto_objetivo.titulo);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", i_r2.diferencia_monetaria && i_r2.diferencia_monetaria !== \"0.00\");\n  }\n}\nfunction IntercambiosEnProcesoComponent_div_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 5);\n    i0.ɵɵtemplate(1, IntercambiosEnProcesoComponent_div_2_div_1_Template, 25, 6, \"div\", 6);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngForOf\", ctx_r2.intercambios);\n  }\n}\nexport let IntercambiosEnProcesoComponent = /*#__PURE__*/(() => {\n  var _staticBlock;\n  class IntercambiosEnProcesoComponent {\n    constructor(intercambiosService, router) {\n      this.intercambiosService = intercambiosService;\n      this.router = router;\n      this.intercambios = [];\n      this.cargando = false;\n    }\n    ngOnInit() {\n      this.cargar();\n    }\n    cargar() {\n      this.cargando = true;\n      this.intercambiosService.listarEnProceso().subscribe({\n        next: res => {\n          this.intercambios = res;\n          this.cargando = false;\n        },\n        error: () => this.cargando = false\n      });\n    }\n    verChat(i) {\n      this.router.navigate([\"/intercambios\", i.id_intercambio]);\n    }\n    cancelar(i) {\n      if (!confirm(\"¿Seguro que quieres cancelar este intercambio?\")) return;\n      this.intercambiosService.cancelar(i.id_intercambio).subscribe({\n        next: () => this.cargar()\n      });\n    }\n    static #_ = _staticBlock = () => (this.ɵfac = function IntercambiosEnProcesoComponent_Factory(__ngFactoryType__) {\n      return new (__ngFactoryType__ || IntercambiosEnProcesoComponent)(i0.ɵɵdirectiveInject(i1.IntercambiosService), i0.ɵɵdirectiveInject(i2.Router));\n    }, this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: IntercambiosEnProcesoComponent,\n      selectors: [[\"app-intercambios-en-proceso\"]],\n      decls: 3,\n      vars: 3,\n      consts: [[\"class\", \"loading\", 4, \"ngIf\"], [\"class\", \"empty\", 4, \"ngIf\"], [\"class\", \"intercambios-lista\", 4, \"ngIf\"], [1, \"loading\"], [1, \"empty\"], [1, \"intercambios-lista\"], [\"class\", \"card\", 4, \"ngFor\", \"ngForOf\"], [1, \"card\"], [1, \"card-header\"], [\"class\", \"avatar\", \"alt\", \"avatar\", 3, \"src\", 4, \"ngIf\"], [1, \"info\"], [1, \"nombre\"], [1, \"estado\"], [1, \"card-body\"], [1, \"producto\"], [\"class\", \"diferencia\", 4, \"ngIf\"], [1, \"card-footer\"], [3, \"click\"], [1, \"btn-cancelar\", 3, \"click\"], [\"alt\", \"avatar\", 1, \"avatar\", 3, \"src\"], [1, \"diferencia\"]],\n      template: function IntercambiosEnProcesoComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵtemplate(0, IntercambiosEnProcesoComponent_div_0_Template, 2, 0, \"div\", 0)(1, IntercambiosEnProcesoComponent_div_1_Template, 2, 0, \"div\", 1)(2, IntercambiosEnProcesoComponent_div_2_Template, 2, 1, \"div\", 2);\n        }\n        if (rf & 2) {\n          i0.ɵɵproperty(\"ngIf\", ctx.cargando);\n          i0.ɵɵadvance();\n          i0.ɵɵproperty(\"ngIf\", !ctx.cargando && ctx.intercambios.length === 0);\n          i0.ɵɵadvance();\n          i0.ɵɵproperty(\"ngIf\", !ctx.cargando && ctx.intercambios.length > 0);\n        }\n      },\n      dependencies: [CommonModule, i3.NgForOf, i3.NgIf, RouterModule],\n      styles: [\".intercambios-lista[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem}.card[_ngcontent-%COMP%]{border-radius:8px;border:1px solid #ddd;padding:.75rem 1rem;background:#fff}.card-header[_ngcontent-%COMP%]{display:flex;gap:.75rem;align-items:center;margin-bottom:.5rem}.avatar[_ngcontent-%COMP%]{width:40px;height:40px;border-radius:50%;object-fit:cover}.info[_ngcontent-%COMP%]   .nombre[_ngcontent-%COMP%]{font-weight:600}.info[_ngcontent-%COMP%]   .estado[_ngcontent-%COMP%]{font-size:.85rem;color:#555}.card-body[_ngcontent-%COMP%]   .producto[_ngcontent-%COMP%]{font-size:.9rem;margin-bottom:.25rem}.diferencia[_ngcontent-%COMP%]{margin-top:.5rem;font-weight:600}.card-footer[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:.5rem;margin-top:.5rem}button[_ngcontent-%COMP%]{padding:.3rem .7rem;border-radius:4px;border:none;cursor:pointer}.btn-cancelar[_ngcontent-%COMP%]{background-color:#f44336;color:#fff}.loading[_ngcontent-%COMP%], .empty[_ngcontent-%COMP%]{text-align:center;margin-top:1rem}\"]\n    }));\n  }\n  _staticBlock();\n  return IntercambiosEnProcesoComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}