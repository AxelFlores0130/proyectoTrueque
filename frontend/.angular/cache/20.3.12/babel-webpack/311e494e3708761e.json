{"ast":null,"code":"import { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { environment } from '../../../environments/environment';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common/http\";\nimport * as i2 from \"../../services/auth.service\";\nimport * as i3 from \"../../services/solicitudes.service\";\nimport * as i4 from \"@angular/common\";\nimport * as i5 from \"@angular/forms\";\nfunction ProductosComponent_option_7_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ÉµÉµelementStart(0, \"option\", 5);\n    i0.ÉµÉµtext(1);\n    i0.ÉµÉµelementEnd();\n  }\n  if (rf & 2) {\n    const c_r1 = ctx.$implicit;\n    i0.ÉµÉµproperty(\"ngValue\", c_r1.id_categoria);\n    i0.ÉµÉµadvance();\n    i0.ÉµÉµtextInterpolate1(\" \", c_r1.nombre, \" \");\n  }\n}\nfunction ProductosComponent_button_13_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r2 = i0.ÉµÉµgetCurrentView();\n    i0.ÉµÉµelementStart(0, \"button\", 18);\n    i0.ÉµÉµlistener(\"click\", function ProductosComponent_button_13_Template_button_click_0_listener() {\n      i0.ÉµÉµrestoreView(_r2);\n      const ctx_r2 = i0.ÉµÉµnextContext();\n      return i0.ÉµÉµresetView(ctx_r2.abrirFormularioNuevo());\n    });\n    i0.ÉµÉµtext(1, \" + Publicar producto \");\n    i0.ÉµÉµelementEnd();\n  }\n}\nfunction ProductosComponent_div_20_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ÉµÉµelementStart(0, \"div\", 19);\n    i0.ÉµÉµtext(1, \" No hay productos disponibles para intercambiar con los filtros actuales. \");\n    i0.ÉµÉµelementEnd();\n  }\n}\nfunction ProductosComponent_div_21_article_1_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ÉµÉµelementStart(0, \"div\", 29);\n    i0.ÉµÉµelement(1, \"img\", 30);\n    i0.ÉµÉµelementEnd();\n  }\n  if (rf & 2) {\n    const imgUrl_r4 = ctx.ngIf;\n    const p_r5 = i0.ÉµÉµnextContext().$implicit;\n    i0.ÉµÉµadvance();\n    i0.ÉµÉµproperty(\"src\", imgUrl_r4, i0.ÉµÉµsanitizeUrl)(\"alt\", p_r5.titulo);\n  }\n}\nfunction ProductosComponent_div_21_article_1_button_10_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r6 = i0.ÉµÉµgetCurrentView();\n    i0.ÉµÉµelementStart(0, \"button\", 31);\n    i0.ÉµÉµlistener(\"click\", function ProductosComponent_div_21_article_1_button_10_Template_button_click_0_listener() {\n      i0.ÉµÉµrestoreView(_r6);\n      const p_r5 = i0.ÉµÉµnextContext().$implicit;\n      const ctx_r2 = i0.ÉµÉµnextContext(2);\n      return i0.ÉµÉµresetView(ctx_r2.crearMatch(p_r5));\n    });\n    i0.ÉµÉµtext(1, \" Me interesa / Hacer match \");\n    i0.ÉµÉµelementEnd();\n  }\n}\nfunction ProductosComponent_div_21_article_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ÉµÉµelementStart(0, \"article\", 22);\n    i0.ÉµÉµtemplate(1, ProductosComponent_div_21_article_1_div_1_Template, 2, 2, \"div\", 23);\n    i0.ÉµÉµelementStart(2, \"div\", 24)(3, \"h3\");\n    i0.ÉµÉµtext(4);\n    i0.ÉµÉµelementEnd();\n    i0.ÉµÉµelementStart(5, \"p\", 25);\n    i0.ÉµÉµtext(6);\n    i0.ÉµÉµelementEnd();\n    i0.ÉµÉµelementStart(7, \"p\", 26);\n    i0.ÉµÉµtext(8);\n    i0.ÉµÉµelementEnd()();\n    i0.ÉµÉµelementStart(9, \"div\", 27);\n    i0.ÉµÉµtemplate(10, ProductosComponent_div_21_article_1_button_10_Template, 2, 0, \"button\", 28);\n    i0.ÉµÉµelementEnd()();\n  }\n  if (rf & 2) {\n    const p_r5 = ctx.$implicit;\n    const ctx_r2 = i0.ÉµÉµnextContext(2);\n    i0.ÉµÉµadvance();\n    i0.ÉµÉµproperty(\"ngIf\", ctx_r2.resolverImagen(p_r5.imagen_url));\n    i0.ÉµÉµadvance(3);\n    i0.ÉµÉµtextInterpolate(p_r5.titulo);\n    i0.ÉµÉµadvance(2);\n    i0.ÉµÉµtextInterpolate(p_r5.categoria_nombre);\n    i0.ÉµÉµadvance(2);\n    i0.ÉµÉµtextInterpolate2(\" $\", p_r5.valor_estimado, \" \\u00B7 \", p_r5.ubicacion, \" \");\n    i0.ÉµÉµadvance(2);\n    i0.ÉµÉµproperty(\"ngIf\", ctx_r2.isAuth);\n  }\n}\nfunction ProductosComponent_div_21_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ÉµÉµelementStart(0, \"div\", 20);\n    i0.ÉµÉµtemplate(1, ProductosComponent_div_21_article_1_Template, 11, 6, \"article\", 21);\n    i0.ÉµÉµelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.ÉµÉµnextContext();\n    i0.ÉµÉµadvance();\n    i0.ÉµÉµproperty(\"ngForOf\", ctx_r2.productosExplorar);\n  }\n}\nfunction ProductosComponent_section_22_div_6_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ÉµÉµelementStart(0, \"div\", 19);\n    i0.ÉµÉµtext(1, \" A\\u00FAn no has publicado productos. \");\n    i0.ÉµÉµelementEnd();\n  }\n}\nfunction ProductosComponent_section_22_div_7_article_1_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ÉµÉµelementStart(0, \"div\", 29);\n    i0.ÉµÉµelement(1, \"img\", 30);\n    i0.ÉµÉµelementEnd();\n  }\n  if (rf & 2) {\n    const imgUrl_r8 = ctx.ngIf;\n    const p_r9 = i0.ÉµÉµnextContext().$implicit;\n    i0.ÉµÉµadvance();\n    i0.ÉµÉµproperty(\"src\", imgUrl_r8, i0.ÉµÉµsanitizeUrl)(\"alt\", p_r9.titulo);\n  }\n}\nfunction ProductosComponent_section_22_div_7_article_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r7 = i0.ÉµÉµgetCurrentView();\n    i0.ÉµÉµelementStart(0, \"article\", 22);\n    i0.ÉµÉµtemplate(1, ProductosComponent_section_22_div_7_article_1_div_1_Template, 2, 2, \"div\", 23);\n    i0.ÉµÉµelementStart(2, \"div\", 24)(3, \"h3\");\n    i0.ÉµÉµtext(4);\n    i0.ÉµÉµelementEnd();\n    i0.ÉµÉµelementStart(5, \"p\", 25);\n    i0.ÉµÉµtext(6);\n    i0.ÉµÉµelementEnd();\n    i0.ÉµÉµelementStart(7, \"p\", 26);\n    i0.ÉµÉµtext(8);\n    i0.ÉµÉµelementEnd();\n    i0.ÉµÉµelementStart(9, \"p\", 33);\n    i0.ÉµÉµtext(10);\n    i0.ÉµÉµelementEnd()();\n    i0.ÉµÉµelementStart(11, \"div\", 34)(12, \"button\", 8);\n    i0.ÉµÉµlistener(\"click\", function ProductosComponent_section_22_div_7_article_1_Template_button_click_12_listener() {\n      const p_r9 = i0.ÉµÉµrestoreView(_r7).$implicit;\n      const ctx_r2 = i0.ÉµÉµnextContext(3);\n      return i0.ÉµÉµresetView(ctx_r2.prepararEditar(p_r9));\n    });\n    i0.ÉµÉµtext(13, \" Editar \");\n    i0.ÉµÉµelementEnd();\n    i0.ÉµÉµelementStart(14, \"button\", 35);\n    i0.ÉµÉµlistener(\"click\", function ProductosComponent_section_22_div_7_article_1_Template_button_click_14_listener() {\n      const p_r9 = i0.ÉµÉµrestoreView(_r7).$implicit;\n      const ctx_r2 = i0.ÉµÉµnextContext(3);\n      return i0.ÉµÉµresetView(ctx_r2.toggleEstado(p_r9));\n    });\n    i0.ÉµÉµtext(15);\n    i0.ÉµÉµelementEnd()()();\n  }\n  if (rf & 2) {\n    const p_r9 = ctx.$implicit;\n    const ctx_r2 = i0.ÉµÉµnextContext(3);\n    i0.ÉµÉµclassProp(\"inactivo\", p_r9.estado === \"baja\");\n    i0.ÉµÉµadvance();\n    i0.ÉµÉµproperty(\"ngIf\", ctx_r2.resolverImagen(p_r9.imagen_url));\n    i0.ÉµÉµadvance(3);\n    i0.ÉµÉµtextInterpolate(p_r9.titulo);\n    i0.ÉµÉµadvance(2);\n    i0.ÉµÉµtextInterpolate(p_r9.categoria_nombre);\n    i0.ÉµÉµadvance(2);\n    i0.ÉµÉµtextInterpolate2(\" $\", p_r9.valor_estimado, \" \\u00B7 \", p_r9.ubicacion, \" \");\n    i0.ÉµÉµadvance();\n    i0.ÉµÉµclassProp(\"baja\", p_r9.estado === \"baja\");\n    i0.ÉµÉµadvance();\n    i0.ÉµÉµtextInterpolate1(\" \", p_r9.estado === \"baja\" ? \"Inactivo (baja)\" : \"Disponible\", \" \");\n    i0.ÉµÉµadvance(4);\n    i0.ÉµÉµproperty(\"ngClass\", p_r9.estado === \"disponible\" ? \"btn-warning\" : \"btn-success\");\n    i0.ÉµÉµadvance();\n    i0.ÉµÉµtextInterpolate1(\" \", p_r9.estado === \"disponible\" ? \"Dar de baja\" : \"Dar de alta\", \" \");\n  }\n}\nfunction ProductosComponent_section_22_div_7_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ÉµÉµelementStart(0, \"div\", 20);\n    i0.ÉµÉµtemplate(1, ProductosComponent_section_22_div_7_article_1_Template, 16, 12, \"article\", 32);\n    i0.ÉµÉµelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.ÉµÉµnextContext(2);\n    i0.ÉµÉµadvance();\n    i0.ÉµÉµproperty(\"ngForOf\", ctx_r2.misProductos);\n  }\n}\nfunction ProductosComponent_section_22_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ÉµÉµelementStart(0, \"section\", 11)(1, \"div\", 12)(2, \"h2\");\n    i0.ÉµÉµtext(3, \"Mis productos publicados\");\n    i0.ÉµÉµelementEnd();\n    i0.ÉµÉµelementStart(4, \"p\", 13);\n    i0.ÉµÉµtext(5, \" Gestiona los productos que has publicado para intercambio. \");\n    i0.ÉµÉµelementEnd()();\n    i0.ÉµÉµtemplate(6, ProductosComponent_section_22_div_6_Template, 2, 0, \"div\", 14)(7, ProductosComponent_section_22_div_7_Template, 2, 1, \"div\", 15);\n    i0.ÉµÉµelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.ÉµÉµnextContext();\n    i0.ÉµÉµadvance(6);\n    i0.ÉµÉµproperty(\"ngIf\", ctx_r2.misProductos.length === 0);\n    i0.ÉµÉµadvance();\n    i0.ÉµÉµproperty(\"ngIf\", ctx_r2.misProductos.length > 0);\n  }\n}\nfunction ProductosComponent_section_23_option_22_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ÉµÉµelementStart(0, \"option\", 5);\n    i0.ÉµÉµtext(1);\n    i0.ÉµÉµelementEnd();\n  }\n  if (rf & 2) {\n    const c_r11 = ctx.$implicit;\n    i0.ÉµÉµproperty(\"ngValue\", c_r11.id_categoria);\n    i0.ÉµÉµadvance();\n    i0.ÉµÉµtextInterpolate1(\" \", c_r11.nombre, \" \");\n  }\n}\nfunction ProductosComponent_section_23_div_35_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ÉµÉµelementStart(0, \"div\", 41)(1, \"label\");\n    i0.ÉµÉµtext(2, \"Vista previa\");\n    i0.ÉµÉµelementEnd();\n    i0.ÉµÉµelementStart(3, \"div\", 53);\n    i0.ÉµÉµelement(4, \"img\", 54);\n    i0.ÉµÉµelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.ÉµÉµnextContext(2);\n    i0.ÉµÉµadvance(4);\n    i0.ÉµÉµproperty(\"src\", ctx_r2.previewUrl, i0.ÉµÉµsanitizeUrl);\n  }\n}\nfunction ProductosComponent_section_23_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r10 = i0.ÉµÉµgetCurrentView();\n    i0.ÉµÉµelementStart(0, \"section\", 36);\n    i0.ÉµÉµlistener(\"click\", function ProductosComponent_section_23_Template_section_click_0_listener() {\n      i0.ÉµÉµrestoreView(_r10);\n      const ctx_r2 = i0.ÉµÉµnextContext();\n      return i0.ÉµÉµresetView(ctx_r2.cerrarFormulario());\n    });\n    i0.ÉµÉµelementStart(1, \"div\", 37);\n    i0.ÉµÉµlistener(\"click\", function ProductosComponent_section_23_Template_div_click_1_listener($event) {\n      i0.ÉµÉµrestoreView(_r10);\n      return i0.ÉµÉµresetView($event.stopPropagation());\n    });\n    i0.ÉµÉµelementStart(2, \"div\", 38)(3, \"h2\");\n    i0.ÉµÉµtext(4);\n    i0.ÉµÉµelementEnd();\n    i0.ÉµÉµelementStart(5, \"button\", 39);\n    i0.ÉµÉµlistener(\"click\", function ProductosComponent_section_23_Template_button_click_5_listener() {\n      i0.ÉµÉµrestoreView(_r10);\n      const ctx_r2 = i0.ÉµÉµnextContext();\n      return i0.ÉµÉµresetView(ctx_r2.cerrarFormulario());\n    });\n    i0.ÉµÉµtext(6, \" \\u2715 \");\n    i0.ÉµÉµelementEnd()();\n    i0.ÉµÉµelementStart(7, \"form\", 40);\n    i0.ÉµÉµlistener(\"ngSubmit\", function ProductosComponent_section_23_Template_form_ngSubmit_7_listener() {\n      i0.ÉµÉµrestoreView(_r10);\n      const ctx_r2 = i0.ÉµÉµnextContext();\n      return i0.ÉµÉµresetView(ctx_r2.guardarProducto());\n    });\n    i0.ÉµÉµelementStart(8, \"div\", 41)(9, \"label\");\n    i0.ÉµÉµtext(10, \"T\\u00EDtulo del producto *\");\n    i0.ÉµÉµelementEnd();\n    i0.ÉµÉµelementStart(11, \"input\", 42);\n    i0.ÉµÉµtwoWayListener(\"ngModelChange\", function ProductosComponent_section_23_Template_input_ngModelChange_11_listener($event) {\n      i0.ÉµÉµrestoreView(_r10);\n      const ctx_r2 = i0.ÉµÉµnextContext();\n      i0.ÉµÉµtwoWayBindingSet(ctx_r2.form.titulo, $event) || (ctx_r2.form.titulo = $event);\n      return i0.ÉµÉµresetView($event);\n    });\n    i0.ÉµÉµelementEnd()();\n    i0.ÉµÉµelementStart(12, \"div\", 41)(13, \"label\");\n    i0.ÉµÉµtext(14, \"Descripci\\u00F3n *\");\n    i0.ÉµÉµelementEnd();\n    i0.ÉµÉµelementStart(15, \"textarea\", 43);\n    i0.ÉµÉµtwoWayListener(\"ngModelChange\", function ProductosComponent_section_23_Template_textarea_ngModelChange_15_listener($event) {\n      i0.ÉµÉµrestoreView(_r10);\n      const ctx_r2 = i0.ÉµÉµnextContext();\n      i0.ÉµÉµtwoWayBindingSet(ctx_r2.form.descripcion, $event) || (ctx_r2.form.descripcion = $event);\n      return i0.ÉµÉµresetView($event);\n    });\n    i0.ÉµÉµelementEnd()();\n    i0.ÉµÉµelementStart(16, \"div\", 44)(17, \"label\");\n    i0.ÉµÉµtext(18, \"Categor\\u00EDa *\");\n    i0.ÉµÉµelementEnd();\n    i0.ÉµÉµelementStart(19, \"select\", 45);\n    i0.ÉµÉµtwoWayListener(\"ngModelChange\", function ProductosComponent_section_23_Template_select_ngModelChange_19_listener($event) {\n      i0.ÉµÉµrestoreView(_r10);\n      const ctx_r2 = i0.ÉµÉµnextContext();\n      i0.ÉµÉµtwoWayBindingSet(ctx_r2.form.id_categoria, $event) || (ctx_r2.form.id_categoria = $event);\n      return i0.ÉµÉµresetView($event);\n    });\n    i0.ÉµÉµelementStart(20, \"option\", 46);\n    i0.ÉµÉµtext(21, \"Selecciona categor\\u00EDa\");\n    i0.ÉµÉµelementEnd();\n    i0.ÉµÉµtemplate(22, ProductosComponent_section_23_option_22_Template, 2, 2, \"option\", 6);\n    i0.ÉµÉµelementEnd()();\n    i0.ÉµÉµelementStart(23, \"div\", 44)(24, \"label\");\n    i0.ÉµÉµtext(25, \"Ubicaci\\u00F3n *\");\n    i0.ÉµÉµelementEnd();\n    i0.ÉµÉµelementStart(26, \"input\", 47);\n    i0.ÉµÉµtwoWayListener(\"ngModelChange\", function ProductosComponent_section_23_Template_input_ngModelChange_26_listener($event) {\n      i0.ÉµÉµrestoreView(_r10);\n      const ctx_r2 = i0.ÉµÉµnextContext();\n      i0.ÉµÉµtwoWayBindingSet(ctx_r2.form.ubicacion, $event) || (ctx_r2.form.ubicacion = $event);\n      return i0.ÉµÉµresetView($event);\n    });\n    i0.ÉµÉµelementEnd()();\n    i0.ÉµÉµelementStart(27, \"div\", 44)(28, \"label\");\n    i0.ÉµÉµtext(29, \"Valor estimado (MXN) *\");\n    i0.ÉµÉµelementEnd();\n    i0.ÉµÉµelementStart(30, \"input\", 48);\n    i0.ÉµÉµtwoWayListener(\"ngModelChange\", function ProductosComponent_section_23_Template_input_ngModelChange_30_listener($event) {\n      i0.ÉµÉµrestoreView(_r10);\n      const ctx_r2 = i0.ÉµÉµnextContext();\n      i0.ÉµÉµtwoWayBindingSet(ctx_r2.form.valor_estimado, $event) || (ctx_r2.form.valor_estimado = $event);\n      return i0.ÉµÉµresetView($event);\n    });\n    i0.ÉµÉµelementEnd()();\n    i0.ÉµÉµelementStart(31, \"div\", 44)(32, \"label\");\n    i0.ÉµÉµtext(33, \"Foto del producto\");\n    i0.ÉµÉµelementEnd();\n    i0.ÉµÉµelementStart(34, \"input\", 49);\n    i0.ÉµÉµlistener(\"change\", function ProductosComponent_section_23_Template_input_change_34_listener($event) {\n      i0.ÉµÉµrestoreView(_r10);\n      const ctx_r2 = i0.ÉµÉµnextContext();\n      return i0.ÉµÉµresetView(ctx_r2.onArchivoSeleccionado($event));\n    });\n    i0.ÉµÉµelementEnd()();\n    i0.ÉµÉµtemplate(35, ProductosComponent_section_23_div_35_Template, 5, 1, \"div\", 50);\n    i0.ÉµÉµelementStart(36, \"div\", 51)(37, \"button\", 8);\n    i0.ÉµÉµlistener(\"click\", function ProductosComponent_section_23_Template_button_click_37_listener() {\n      i0.ÉµÉµrestoreView(_r10);\n      const ctx_r2 = i0.ÉµÉµnextContext();\n      return i0.ÉµÉµresetView(ctx_r2.cerrarFormulario());\n    });\n    i0.ÉµÉµtext(38, \" Cancelar \");\n    i0.ÉµÉµelementEnd();\n    i0.ÉµÉµelementStart(39, \"button\", 52);\n    i0.ÉµÉµtext(40);\n    i0.ÉµÉµelementEnd()()()()();\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.ÉµÉµnextContext();\n    i0.ÉµÉµadvance(4);\n    i0.ÉµÉµtextInterpolate(ctx_r2.editando ? \"Editar producto\" : \"Publicar producto\");\n    i0.ÉµÉµadvance(7);\n    i0.ÉµÉµtwoWayProperty(\"ngModel\", ctx_r2.form.titulo);\n    i0.ÉµÉµadvance(4);\n    i0.ÉµÉµtwoWayProperty(\"ngModel\", ctx_r2.form.descripcion);\n    i0.ÉµÉµadvance(4);\n    i0.ÉµÉµtwoWayProperty(\"ngModel\", ctx_r2.form.id_categoria);\n    i0.ÉµÉµadvance();\n    i0.ÉµÉµproperty(\"ngValue\", null);\n    i0.ÉµÉµadvance(2);\n    i0.ÉµÉµproperty(\"ngForOf\", ctx_r2.categorias);\n    i0.ÉµÉµadvance(4);\n    i0.ÉµÉµtwoWayProperty(\"ngModel\", ctx_r2.form.ubicacion);\n    i0.ÉµÉµadvance(4);\n    i0.ÉµÉµtwoWayProperty(\"ngModel\", ctx_r2.form.valor_estimado);\n    i0.ÉµÉµadvance(5);\n    i0.ÉµÉµproperty(\"ngIf\", ctx_r2.previewUrl);\n    i0.ÉµÉµadvance(5);\n    i0.ÉµÉµtextInterpolate1(\" \", ctx_r2.editando ? \"Guardar cambios\" : \"Publicar producto\", \" \");\n  }\n}\nfunction ProductosComponent_section_24_div_8_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ÉµÉµelementStart(0, \"div\", 41)(1, \"label\");\n    i0.ÉµÉµtext(2, \"Producto que quieres\");\n    i0.ÉµÉµelementEnd();\n    i0.ÉµÉµelementStart(3, \"div\", 53);\n    i0.ÉµÉµelement(4, \"img\", 30);\n    i0.ÉµÉµelementEnd();\n    i0.ÉµÉµelementStart(5, \"p\")(6, \"strong\");\n    i0.ÉµÉµtext(7);\n    i0.ÉµÉµelementEnd()();\n    i0.ÉµÉµelementStart(8, \"p\", 26);\n    i0.ÉµÉµtext(9);\n    i0.ÉµÉµelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.ÉµÉµnextContext(2);\n    i0.ÉµÉµadvance(4);\n    i0.ÉµÉµproperty(\"src\", ctx_r2.resolverImagen(ctx_r2.productoObjetivo.imagen_url), i0.ÉµÉµsanitizeUrl)(\"alt\", ctx_r2.productoObjetivo.titulo);\n    i0.ÉµÉµadvance(3);\n    i0.ÉµÉµtextInterpolate(ctx_r2.productoObjetivo.titulo);\n    i0.ÉµÉµadvance(2);\n    i0.ÉµÉµtextInterpolate2(\" $\", ctx_r2.productoObjetivo.valor_estimado, \" \\u00B7 \", ctx_r2.productoObjetivo.ubicacion, \" \");\n  }\n}\nfunction ProductosComponent_section_24_input_12_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r13 = i0.ÉµÉµgetCurrentView();\n    i0.ÉµÉµelementStart(0, \"input\", 65);\n    i0.ÉµÉµtwoWayListener(\"ngModelChange\", function ProductosComponent_section_24_input_12_Template_input_ngModelChange_0_listener($event) {\n      i0.ÉµÉµrestoreView(_r13);\n      const ctx_r2 = i0.ÉµÉµnextContext(2);\n      i0.ÉµÉµtwoWayBindingSet(ctx_r2.busquedaMisProductos, $event) || (ctx_r2.busquedaMisProductos = $event);\n      return i0.ÉµÉµresetView($event);\n    });\n    i0.ÉµÉµelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.ÉµÉµnextContext(2);\n    i0.ÉµÉµtwoWayProperty(\"ngModel\", ctx_r2.busquedaMisProductos);\n  }\n}\nfunction ProductosComponent_section_24_p_13_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ÉµÉµelementStart(0, \"p\", 33);\n    i0.ÉµÉµtext(1, \" No tienes productos propios para ofrecer. Puedes ofrecer solo diferencia econ\\u00F3mica. \");\n    i0.ÉµÉµelementEnd();\n  }\n}\nfunction ProductosComponent_section_24_div_14_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r14 = i0.ÉµÉµgetCurrentView();\n    i0.ÉµÉµelementStart(0, \"div\", 68);\n    i0.ÉµÉµlistener(\"click\", function ProductosComponent_section_24_div_14_div_1_Template_div_click_0_listener() {\n      const mp_r15 = i0.ÉµÉµrestoreView(_r14).$implicit;\n      const ctx_r2 = i0.ÉµÉµnextContext(3);\n      return i0.ÉµÉµresetView(ctx_r2.seleccionarProductoOfrece(mp_r15));\n    });\n    i0.ÉµÉµelementStart(1, \"div\", 69);\n    i0.ÉµÉµelement(2, \"img\", 30);\n    i0.ÉµÉµelementEnd();\n    i0.ÉµÉµelementStart(3, \"div\", 70)(4, \"div\", 71);\n    i0.ÉµÉµtext(5);\n    i0.ÉµÉµelementEnd();\n    i0.ÉµÉµelementStart(6, \"div\", 72);\n    i0.ÉµÉµtext(7);\n    i0.ÉµÉµelementEnd()()();\n  }\n  if (rf & 2) {\n    const mp_r15 = ctx.$implicit;\n    const ctx_r2 = i0.ÉµÉµnextContext(3);\n    i0.ÉµÉµclassProp(\"seleccionado\", ctx_r2.productoOfreceId === mp_r15.id_producto);\n    i0.ÉµÉµadvance(2);\n    i0.ÉµÉµproperty(\"src\", ctx_r2.resolverImagen(mp_r15.imagen_url), i0.ÉµÉµsanitizeUrl)(\"alt\", mp_r15.titulo);\n    i0.ÉµÉµadvance(3);\n    i0.ÉµÉµtextInterpolate(mp_r15.titulo);\n    i0.ÉµÉµadvance(2);\n    i0.ÉµÉµtextInterpolate1(\"$\", mp_r15.valor_estimado);\n  }\n}\nfunction ProductosComponent_section_24_div_14_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ÉµÉµelementStart(0, \"div\", 66);\n    i0.ÉµÉµtemplate(1, ProductosComponent_section_24_div_14_div_1_Template, 8, 6, \"div\", 67);\n    i0.ÉµÉµelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.ÉµÉµnextContext(2);\n    i0.ÉµÉµadvance();\n    i0.ÉµÉµproperty(\"ngForOf\", ctx_r2.misProductosFiltrados);\n  }\n}\nfunction ProductosComponent_section_24_div_15_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ÉµÉµelementStart(0, \"div\", 53);\n    i0.ÉµÉµelement(1, \"img\", 30);\n    i0.ÉµÉµelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.ÉµÉµnextContext(2);\n    i0.ÉµÉµadvance();\n    i0.ÉµÉµproperty(\"src\", ctx_r2.resolverImagen(ctx_r2.productoOfreceSeleccionado.imagen_url), i0.ÉµÉµsanitizeUrl)(\"alt\", ctx_r2.productoOfreceSeleccionado.titulo);\n  }\n}\nfunction ProductosComponent_section_24_p_16_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ÉµÉµelementStart(0, \"p\")(1, \"strong\");\n    i0.ÉµÉµtext(2);\n    i0.ÉµÉµelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.ÉµÉµnextContext(2);\n    i0.ÉµÉµadvance(2);\n    i0.ÉµÉµtextInterpolate(ctx_r2.productoOfreceSeleccionado.titulo);\n  }\n}\nfunction ProductosComponent_section_24_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r12 = i0.ÉµÉµgetCurrentView();\n    i0.ÉµÉµelementStart(0, \"section\", 36);\n    i0.ÉµÉµlistener(\"click\", function ProductosComponent_section_24_Template_section_click_0_listener() {\n      i0.ÉµÉµrestoreView(_r12);\n      const ctx_r2 = i0.ÉµÉµnextContext();\n      return i0.ÉµÉµresetView(ctx_r2.cerrarModalSolicitud());\n    });\n    i0.ÉµÉµelementStart(1, \"div\", 37);\n    i0.ÉµÉµlistener(\"click\", function ProductosComponent_section_24_Template_div_click_1_listener($event) {\n      i0.ÉµÉµrestoreView(_r12);\n      return i0.ÉµÉµresetView($event.stopPropagation());\n    });\n    i0.ÉµÉµelementStart(2, \"div\", 38)(3, \"h2\");\n    i0.ÉµÉµtext(4, \"Proponer intercambio\");\n    i0.ÉµÉµelementEnd();\n    i0.ÉµÉµelementStart(5, \"button\", 39);\n    i0.ÉµÉµlistener(\"click\", function ProductosComponent_section_24_Template_button_click_5_listener() {\n      i0.ÉµÉµrestoreView(_r12);\n      const ctx_r2 = i0.ÉµÉµnextContext();\n      return i0.ÉµÉµresetView(ctx_r2.cerrarModalSolicitud());\n    });\n    i0.ÉµÉµtext(6, \" \\u2715 \");\n    i0.ÉµÉµelementEnd()();\n    i0.ÉµÉµelementStart(7, \"div\", 55);\n    i0.ÉµÉµtemplate(8, ProductosComponent_section_24_div_8_Template, 10, 5, \"div\", 50);\n    i0.ÉµÉµelementStart(9, \"div\", 41)(10, \"label\");\n    i0.ÉµÉµtext(11, \"Tu producto que ofreces\");\n    i0.ÉµÉµelementEnd();\n    i0.ÉµÉµtemplate(12, ProductosComponent_section_24_input_12_Template, 1, 1, \"input\", 56)(13, ProductosComponent_section_24_p_13_Template, 2, 0, \"p\", 57)(14, ProductosComponent_section_24_div_14_Template, 2, 1, \"div\", 58)(15, ProductosComponent_section_24_div_15_Template, 2, 2, \"div\", 59)(16, ProductosComponent_section_24_p_16_Template, 3, 1, \"p\", 60);\n    i0.ÉµÉµelementEnd();\n    i0.ÉµÉµelementStart(17, \"div\", 44)(18, \"label\");\n    i0.ÉµÉµtext(19, \"Diferencia econ\\u00F3mica (opcional)\");\n    i0.ÉµÉµelementEnd();\n    i0.ÉµÉµelementStart(20, \"input\", 61);\n    i0.ÉµÉµtwoWayListener(\"ngModelChange\", function ProductosComponent_section_24_Template_input_ngModelChange_20_listener($event) {\n      i0.ÉµÉµrestoreView(_r12);\n      const ctx_r2 = i0.ÉµÉµnextContext();\n      i0.ÉµÉµtwoWayBindingSet(ctx_r2.diferenciaPropuesta, $event) || (ctx_r2.diferenciaPropuesta = $event);\n      return i0.ÉµÉµresetView($event);\n    });\n    i0.ÉµÉµelementEnd()();\n    i0.ÉµÉµelementStart(21, \"div\", 41)(22, \"label\");\n    i0.ÉµÉµtext(23, \"Mensaje (opcional)\");\n    i0.ÉµÉµelementEnd();\n    i0.ÉµÉµelementStart(24, \"textarea\", 62);\n    i0.ÉµÉµtwoWayListener(\"ngModelChange\", function ProductosComponent_section_24_Template_textarea_ngModelChange_24_listener($event) {\n      i0.ÉµÉµrestoreView(_r12);\n      const ctx_r2 = i0.ÉµÉµnextContext();\n      i0.ÉµÉµtwoWayBindingSet(ctx_r2.mensajeSolicitud, $event) || (ctx_r2.mensajeSolicitud = $event);\n      return i0.ÉµÉµresetView($event);\n    });\n    i0.ÉµÉµelementEnd()();\n    i0.ÉµÉµelementStart(25, \"div\", 51)(26, \"button\", 63);\n    i0.ÉµÉµlistener(\"click\", function ProductosComponent_section_24_Template_button_click_26_listener() {\n      i0.ÉµÉµrestoreView(_r12);\n      const ctx_r2 = i0.ÉµÉµnextContext();\n      return i0.ÉµÉµresetView(ctx_r2.cerrarModalSolicitud());\n    });\n    i0.ÉµÉµtext(27, \" Cancelar \");\n    i0.ÉµÉµelementEnd();\n    i0.ÉµÉµelementStart(28, \"button\", 64);\n    i0.ÉµÉµlistener(\"click\", function ProductosComponent_section_24_Template_button_click_28_listener() {\n      i0.ÉµÉµrestoreView(_r12);\n      const ctx_r2 = i0.ÉµÉµnextContext();\n      return i0.ÉµÉµresetView(ctx_r2.enviarSolicitud());\n    });\n    i0.ÉµÉµtext(29, \" Enviar solicitud \");\n    i0.ÉµÉµelementEnd()()()()();\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.ÉµÉµnextContext();\n    i0.ÉµÉµadvance(8);\n    i0.ÉµÉµproperty(\"ngIf\", ctx_r2.productoObjetivo);\n    i0.ÉµÉµadvance(4);\n    i0.ÉµÉµproperty(\"ngIf\", ctx_r2.misProductos.length > 0);\n    i0.ÉµÉµadvance();\n    i0.ÉµÉµproperty(\"ngIf\", ctx_r2.misProductos.length === 0);\n    i0.ÉµÉµadvance();\n    i0.ÉµÉµproperty(\"ngIf\", ctx_r2.misProductosFiltrados.length > 0);\n    i0.ÉµÉµadvance();\n    i0.ÉµÉµproperty(\"ngIf\", ctx_r2.productoOfreceSeleccionado);\n    i0.ÉµÉµadvance();\n    i0.ÉµÉµproperty(\"ngIf\", ctx_r2.productoOfreceSeleccionado);\n    i0.ÉµÉµadvance(4);\n    i0.ÉµÉµtwoWayProperty(\"ngModel\", ctx_r2.diferenciaPropuesta);\n    i0.ÉµÉµadvance(4);\n    i0.ÉµÉµtwoWayProperty(\"ngModel\", ctx_r2.mensajeSolicitud);\n    i0.ÉµÉµadvance(2);\n    i0.ÉµÉµproperty(\"disabled\", ctx_r2.guardandoSolicitud);\n    i0.ÉµÉµadvance(2);\n    i0.ÉµÉµproperty(\"disabled\", ctx_r2.guardandoSolicitud);\n  }\n}\nfunction ProductosComponent_section_25_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r16 = i0.ÉµÉµgetCurrentView();\n    i0.ÉµÉµelementStart(0, \"section\", 36);\n    i0.ÉµÉµlistener(\"click\", function ProductosComponent_section_25_Template_section_click_0_listener() {\n      i0.ÉµÉµrestoreView(_r16);\n      const ctx_r2 = i0.ÉµÉµnextContext();\n      return i0.ÉµÉµresetView(ctx_r2.cancelarBaja());\n    });\n    i0.ÉµÉµelementStart(1, \"div\", 37);\n    i0.ÉµÉµlistener(\"click\", function ProductosComponent_section_25_Template_div_click_1_listener($event) {\n      i0.ÉµÉµrestoreView(_r16);\n      return i0.ÉµÉµresetView($event.stopPropagation());\n    });\n    i0.ÉµÉµelementStart(2, \"div\", 38)(3, \"h2\");\n    i0.ÉµÉµtext(4, \"Confirmar baja del producto\");\n    i0.ÉµÉµelementEnd();\n    i0.ÉµÉµelementStart(5, \"button\", 39);\n    i0.ÉµÉµlistener(\"click\", function ProductosComponent_section_25_Template_button_click_5_listener() {\n      i0.ÉµÉµrestoreView(_r16);\n      const ctx_r2 = i0.ÉµÉµnextContext();\n      return i0.ÉµÉµresetView(ctx_r2.cancelarBaja());\n    });\n    i0.ÉµÉµtext(6, \" \\u2715 \");\n    i0.ÉµÉµelementEnd()();\n    i0.ÉµÉµelementStart(7, \"div\", 55)(8, \"div\", 41)(9, \"p\", 73);\n    i0.ÉµÉµtext(10, \" \\u00BFEst\\u00E1s seguro de que deseas dar de baja este producto? Dejar\\u00E1 de aparecer para otros usuarios, pero podr\\u00E1s volver a darlo de alta cuando quieras. \");\n    i0.ÉµÉµelementEnd();\n    i0.ÉµÉµelementStart(11, \"div\", 53);\n    i0.ÉµÉµelement(12, \"img\", 30);\n    i0.ÉµÉµelementEnd();\n    i0.ÉµÉµelementStart(13, \"p\")(14, \"strong\");\n    i0.ÉµÉµtext(15);\n    i0.ÉµÉµelementEnd()();\n    i0.ÉµÉµelementStart(16, \"p\", 26);\n    i0.ÉµÉµtext(17);\n    i0.ÉµÉµelementEnd()();\n    i0.ÉµÉµelementStart(18, \"div\", 51)(19, \"button\", 63);\n    i0.ÉµÉµlistener(\"click\", function ProductosComponent_section_25_Template_button_click_19_listener() {\n      i0.ÉµÉµrestoreView(_r16);\n      const ctx_r2 = i0.ÉµÉµnextContext();\n      return i0.ÉµÉµresetView(ctx_r2.cancelarBaja());\n    });\n    i0.ÉµÉµtext(20, \" Cancelar \");\n    i0.ÉµÉµelementEnd();\n    i0.ÉµÉµelementStart(21, \"button\", 74);\n    i0.ÉµÉµlistener(\"click\", function ProductosComponent_section_25_Template_button_click_21_listener() {\n      i0.ÉµÉµrestoreView(_r16);\n      const ctx_r2 = i0.ÉµÉµnextContext();\n      return i0.ÉµÉµresetView(ctx_r2.confirmarBaja());\n    });\n    i0.ÉµÉµtext(22, \" S\\u00ED, dar de baja \");\n    i0.ÉµÉµelementEnd()()()()();\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.ÉµÉµnextContext();\n    i0.ÉµÉµadvance(12);\n    i0.ÉµÉµproperty(\"src\", ctx_r2.resolverImagen(ctx_r2.productoAConfirmarBaja.imagen_url), i0.ÉµÉµsanitizeUrl)(\"alt\", ctx_r2.productoAConfirmarBaja.titulo);\n    i0.ÉµÉµadvance(3);\n    i0.ÉµÉµtextInterpolate(ctx_r2.productoAConfirmarBaja.titulo);\n    i0.ÉµÉµadvance(2);\n    i0.ÉµÉµtextInterpolate2(\" $\", ctx_r2.productoAConfirmarBaja.valor_estimado, \" \\u00B7 \", ctx_r2.productoAConfirmarBaja.ubicacion, \" \");\n    i0.ÉµÉµadvance(2);\n    i0.ÉµÉµproperty(\"disabled\", ctx_r2.guardandoBaja);\n    i0.ÉµÉµadvance(2);\n    i0.ÉµÉµproperty(\"disabled\", ctx_r2.guardandoBaja);\n  }\n}\nexport let ProductosComponent = /*#__PURE__*/(() => {\n  var _staticBlock;\n  class ProductosComponent {\n    get misProductosFiltrados() {\n      const texto = (this.busquedaMisProductos || '').toLowerCase().trim();\n      if (!texto) return this.misProductos;\n      return this.misProductos.filter(p => p.titulo.toLowerCase().includes(texto) || (p.descripcion || '').toLowerCase().includes(texto));\n    }\n    get isAuth() {\n      return this.auth.isAuth();\n    }\n    constructor(http, auth, solicitudes) {\n      this.http = http;\n      this.auth = auth;\n      this.solicitudes = solicitudes;\n      this.API = environment.apiUrl;\n      // Toolbar / filtros\n      this.busqueda = '';\n      this.categoriaSeleccionada = null;\n      this.categorias = [{\n        id_categoria: 1,\n        nombre: 'ElectrÃ³nicos'\n      }, {\n        id_categoria: 2,\n        nombre: 'Celulares'\n      }, {\n        id_categoria: 3,\n        nombre: 'Hogar'\n      }, {\n        id_categoria: 4,\n        nombre: 'Deportes'\n      }, {\n        id_categoria: 5,\n        nombre: 'Ropa'\n      }, {\n        id_categoria: 6,\n        nombre: 'Otros'\n      }];\n      // datos\n      this.productosAll = [];\n      this.productosBaseExplorar = []; // solo disponibles\n      this.productosExplorar = [];\n      this.misProductos = [];\n      // formulario / modal producto\n      this.mostrarFormulario = false;\n      this.editando = false;\n      this.form = this.crearFormVacio();\n      this.previewUrl = null;\n      this.archivo = null;\n      this.guardando = false;\n      // ------------------------------------------------\n      // MODAL SOLICITUD / MATCH\n      // ------------------------------------------------\n      this.mostrarModalSolicitud = false;\n      this.productoObjetivo = null;\n      this.productoOfreceId = null;\n      this.mensajeSolicitud = 'Me interesa tu producto';\n      this.diferenciaPropuesta = null;\n      this.guardandoSolicitud = false;\n      // Filtro y selecciÃ³n de producto que ofrece\n      this.busquedaMisProductos = '';\n      this.productoOfreceSeleccionado = null;\n      // ------------------------------------------------\n      // MODAL CONFIRMAR BAJA\n      // ------------------------------------------------\n      this.mostrarConfirmarBaja = false;\n      this.productoAConfirmarBaja = null;\n      this.guardandoBaja = false;\n    }\n    // ------------------------------------------------\n    // INIT\n    // ------------------------------------------------\n    ngOnInit() {\n      this.cargarProductos();\n    }\n    // ------------------------------------------------\n    // AUTH HELPERS\n    // ------------------------------------------------\n    authHeaders() {\n      return this.auth.authHeaders();\n    }\n    getIdUsuarioActual() {\n      const u = this.auth.getUser();\n      return u?.id_usuario ?? null;\n    }\n    mapCategoria(id_categoria) {\n      switch (id_categoria) {\n        case 1:\n          return 'ElectrÃ³nicos';\n        case 2:\n          return 'Celulares';\n        case 3:\n          return 'Hogar';\n        case 4:\n          return 'Deportes';\n        case 5:\n          return 'Ropa';\n        case 6:\n          return 'Otros';\n        default:\n          return null;\n      }\n    }\n    // ------------------------------------------------\n    // CARGA DE PRODUCTOS\n    // ------------------------------------------------\n    cargarProductos() {\n      const idActual = this.getIdUsuarioActual();\n      // Si el usuario estÃ¡ logueado, pedimos tambiÃ©n los productos en \"baja\"\n      const options = {};\n      if (idActual) {\n        options.params = {\n          incluir_bajas: '1'\n        };\n      }\n      // Listado pÃºblico: no hace falta mandar headers aquÃ­\n      this.http.get(`${this.API}/productos`, options).subscribe(res => {\n        const rawList = res || [];\n        const lista = rawList.map(raw => {\n          const estado = (raw.estado || raw.ESTADO || '').toString().toLowerCase();\n          const id_cat = raw.id_categoria !== undefined && raw.id_categoria !== null ? Number(raw.id_categoria) : null;\n          const p = {\n            id_producto: Number(raw.id_producto),\n            id_usuario: Number(raw.id_usuario),\n            id_categoria: id_cat,\n            titulo: raw.titulo ?? '',\n            descripcion: raw.descripcion ?? '',\n            valor_estimado: Number(raw.valor_estimado) || 0,\n            imagen_url: raw.imagen_url || null,\n            ubicacion: raw.ubicacion || '',\n            estado,\n            fecha_publicacion: raw.fecha_publicacion || null,\n            categoria_nombre: raw.categoria_nombre ?? this.mapCategoria(id_cat),\n            estado_fisico: raw.estado_fisico || null\n          };\n          return p;\n        });\n        this.productosAll = lista;\n        if (idActual) {\n          // ðŸ‘‡ MIS PRODUCTOS: TODOS (disponibles + baja)\n          this.misProductos = lista.filter(p => p.id_usuario === idActual);\n          // ðŸ‘‡ EXPLORAR: solo productos de otros usuarios y disponibles\n          this.productosBaseExplorar = lista.filter(p => p.id_usuario !== idActual && p.estado === 'disponible');\n        } else {\n          this.misProductos = [];\n          this.productosBaseExplorar = lista.filter(p => p.estado === 'disponible');\n        }\n        this.aplicarFiltrosExplorar();\n      }, err => {\n        console.error('Error al cargar productos', err);\n        this.productosAll = [];\n        this.productosBaseExplorar = [];\n        this.productosExplorar = [];\n        this.misProductos = [];\n      });\n    }\n    // ------------------------------------------------\n    // FILTROS\n    // ------------------------------------------------\n    limpiarFiltros() {\n      this.busqueda = '';\n      this.categoriaSeleccionada = null;\n      this.aplicarFiltrosExplorar();\n    }\n    onBuscar() {\n      this.aplicarFiltrosExplorar();\n    }\n    aplicarFiltrosExplorar() {\n      const texto = (this.busqueda || '').toLowerCase().trim();\n      const idCat = this.categoriaSeleccionada;\n      const base = this.productosBaseExplorar;\n      this.productosExplorar = base.filter(p => {\n        const coincideTexto = !texto || p.titulo.toLowerCase().includes(texto) || (p.descripcion || '').toLowerCase().includes(texto) || (p.ubicacion || '').toLowerCase().includes(texto);\n        const coincideCategoria = idCat === null || p.id_categoria === idCat;\n        return coincideTexto && coincideCategoria;\n      });\n    }\n    // ------------------------------------------------\n    // UTILIDADES UI\n    // ------------------------------------------------\n    resolverImagen(url) {\n      // Si no hay imagen, usamos placeholder\n      if (!url) {\n        return 'assets/img/placeholder-producto.png';\n      }\n      // Si ya viene como URL absoluta, la dejamos tal cual\n      if (url.startsWith('http://') || url.startsWith('https://')) {\n        return url;\n      }\n      // Base del backend (sin \"/api\")\n      const baseBackend = this.API.replace('/api', '');\n      // Nos aseguramos de que la ruta empiece con \"/\"\n      if (!url.startsWith('/')) {\n        url = '/' + url;\n      }\n      return baseBackend + url;\n    }\n    // ------------------------------------------------\n    // MATCH / SOLICITUD\n    // ------------------------------------------------\n    crearMatch(p) {\n      if (!this.isAuth) {\n        alert('Inicia sesiÃ³n para proponer un intercambio.');\n        return;\n      }\n      this.productoObjetivo = p;\n      // Por defecto, seleccionamos el primer producto propio (si hay)\n      if (this.misProductos.length > 0) {\n        this.productoOfreceId = this.misProductos[0].id_producto;\n        this.productoOfreceSeleccionado = this.misProductos[0];\n      } else {\n        this.productoOfreceId = null;\n        this.productoOfreceSeleccionado = null;\n      }\n      this.mensajeSolicitud = 'Me interesa tu producto';\n      this.diferenciaPropuesta = null;\n      this.guardandoSolicitud = false;\n      this.busquedaMisProductos = '';\n      this.mostrarModalSolicitud = true;\n    }\n    seleccionarProductoOfrece(mp) {\n      this.productoOfreceId = mp.id_producto;\n      this.productoOfreceSeleccionado = mp;\n    }\n    cerrarModalSolicitud() {\n      if (this.guardandoSolicitud) return;\n      this.mostrarModalSolicitud = false;\n    }\n    enviarSolicitud() {\n      if (!this.productoObjetivo) {\n        alert('No se encontrÃ³ el producto objetivo.');\n        return;\n      }\n      this.guardandoSolicitud = true;\n      // ðŸ‘‡ Aseguramos que sea nÃºmero o null\n      let diffNumber = null;\n      if (this.diferenciaPropuesta !== null && this.diferenciaPropuesta !== undefined) {\n        const parsed = Number(this.diferenciaPropuesta);\n        diffNumber = isNaN(parsed) ? null : parsed;\n      }\n      const payload = {\n        id_producto_objetivo: this.productoObjetivo.id_producto,\n        id_producto_ofrece: this.productoOfreceId || undefined,\n        mensaje: this.mensajeSolicitud || undefined,\n        diferencia_propuesta: diffNumber // ðŸ‘ˆ aquÃ­ ya va como nÃºmero o null\n      };\n      console.log('Payload solicitud que se envÃ­a:', payload);\n      this.solicitudes.crear(payload).subscribe({\n        next: () => {\n          this.guardandoSolicitud = false;\n          this.mostrarModalSolicitud = false;\n          alert('Solicitud enviada correctamente.');\n        },\n        error: err => {\n          console.error('Error al crear solicitud', err);\n          this.guardandoSolicitud = false;\n          alert('Error al enviar la solicitud.');\n        }\n      });\n    }\n    // ------------------------------------------------\n    // FORMULARIO / MODAL PRODUCTO\n    // ------------------------------------------------\n    crearFormVacio() {\n      return {\n        id_producto: null,\n        titulo: '',\n        descripcion: '',\n        id_categoria: null,\n        ubicacion: '',\n        valor_estimado: 0,\n        estado_fisico: 'Usado'\n      };\n    }\n    abrirFormularioNuevo() {\n      if (!this.isAuth) {\n        alert('Inicia sesiÃ³n para publicar un producto.');\n        return;\n      }\n      this.editando = false;\n      this.form = this.crearFormVacio();\n      this.previewUrl = null;\n      this.archivo = null;\n      this.guardando = false;\n      this.mostrarFormulario = true;\n    }\n    prepararEditar(p) {\n      if (!this.isAuth) return;\n      this.editando = true;\n      this.form = {\n        id_producto: p.id_producto,\n        titulo: p.titulo,\n        descripcion: p.descripcion,\n        id_categoria: p.id_categoria ?? null,\n        ubicacion: p.ubicacion,\n        valor_estimado: p.valor_estimado,\n        estado_fisico: p.estado_fisico || 'Usado'\n      };\n      this.previewUrl = p.imagen_url || null;\n      this.archivo = null;\n      this.guardando = false;\n      this.mostrarFormulario = true;\n    }\n    cerrarFormulario() {\n      if (this.guardando) return;\n      this.mostrarFormulario = false;\n    }\n    onArchivoSeleccionado(ev) {\n      const input = ev.target;\n      if (input.files?.length) {\n        const file = input.files[0] || null;\n        if (!file) return;\n        this.archivo = file;\n        const reader = new FileReader();\n        reader.onload = () => this.previewUrl = reader.result;\n        reader.readAsDataURL(file);\n      }\n    }\n    // ------------------------------------------------\n    // CREAR / EDITAR PRODUCTO\n    // ------------------------------------------------\n    guardarProducto() {\n      if (this.guardando) return;\n      if (!this.form.titulo || !this.form.descripcion || !this.form.id_categoria || !this.form.ubicacion || this.form.valor_estimado <= 0) {\n        alert('Por favor completa todos los campos obligatorios.');\n        return;\n      }\n      this.guardando = true;\n      const publicarOEditar = imagen_url => {\n        const body = {\n          id_categoria: this.form.id_categoria,\n          titulo: this.form.titulo,\n          descripcion: this.form.descripcion,\n          valor_estimado: this.form.valor_estimado,\n          ubicacion: this.form.ubicacion,\n          imagen_url\n        };\n        if (this.editando && this.form.id_producto) {\n          const id = this.form.id_producto;\n          this.http.put(`${this.API}/productos/${id}`, body, {\n            headers: this.auth.authHeaders() // ðŸ‘ˆ aquÃ­\n          }).subscribe(() => {\n            this.guardando = false;\n            this.mostrarFormulario = false;\n            alert('Producto actualizado correctamente.');\n            this.cargarProductos();\n          }, err => {\n            console.error('Error al editar producto', err);\n            this.guardando = false;\n            alert('Error al editar producto.');\n          });\n        } else {\n          this.http.post(`${this.API}/productos`, body, {\n            headers: this.auth.authHeaders() // ðŸ‘ˆ y aquÃ­\n          }).subscribe(() => {\n            this.guardando = false;\n            this.mostrarFormulario = false;\n            alert('Producto publicado correctamente.');\n            this.cargarProductos();\n          }, err => {\n            console.error('Error al crear producto', err);\n            this.guardando = false;\n            alert('Error al publicar producto.');\n          });\n        }\n      };\n      // Subida de imagen (si hay archivo nuevo)\n      if (this.archivo) {\n        const fd = new FormData();\n        // ðŸ‘‡ MUY IMPORTANTE: el backend espera \"archivo\", no \"file\"\n        fd.append('archivo', this.archivo);\n        this.http.post(`${this.API}/upload`, fd, {\n          headers: this.authHeaders()\n        }).subscribe(res => {\n          const url = res?.url || null;\n          publicarOEditar(url);\n        }, err => {\n          console.error('Error al subir imagen', err);\n          const urlExistente = this.editando ? this.previewUrl : null;\n          publicarOEditar(urlExistente);\n        });\n      } else {\n        const urlExistente = this.editando ? this.previewUrl : null;\n        publicarOEditar(urlExistente);\n      }\n    }\n    // ------------------------------------------------\n    // CAMBIAR ESTADO (BAJA / ALTA) CON CONFIRMACIÃ“N\n    // ------------------------------------------------\n    toggleEstado(p) {\n      if (!this.isAuth) return;\n      // Si estÃ¡ disponible, primero preguntamos confirmaciÃ³n\n      if (p.estado === 'disponible') {\n        this.productoAConfirmarBaja = p;\n        this.mostrarConfirmarBaja = true;\n        return;\n      }\n      // Si ya estÃ¡ en baja, lo damos de alta directamente\n      this.cambiarEstadoEnServidor(p);\n    }\n    cambiarEstadoEnServidor(p) {\n      this.http.put(`${this.API}/productos/${p.id_producto}/estado`, {}, {\n        headers: this.auth.authHeaders()\n      } // ðŸ‘ˆ directo desde AuthService\n      ).subscribe(res => {\n        const estadoBackend = (res?.estado || '').toString().toLowerCase();\n        if (estadoBackend) {\n          p.estado = estadoBackend; // 'disponible' o 'baja'\n        } else {\n          p.estado = p.estado === 'disponible' ? 'baja' : 'disponible';\n        }\n      }, err => {\n        console.error('Error al cambiar estado del producto', err);\n        alert('Error al cambiar el estado del producto.');\n      });\n    }\n    cancelarBaja() {\n      if (this.guardandoBaja) return;\n      this.mostrarConfirmarBaja = false;\n      this.productoAConfirmarBaja = null;\n    }\n    confirmarBaja() {\n      if (!this.productoAConfirmarBaja) return;\n      this.guardandoBaja = true;\n      const p = this.productoAConfirmarBaja;\n      this.cambiarEstadoEnServidor(p);\n      this.guardandoBaja = false;\n      this.mostrarConfirmarBaja = false;\n      this.productoAConfirmarBaja = null;\n    }\n    static #_ = _staticBlock = () => (this.Éµfac = function ProductosComponent_Factory(__ngFactoryType__) {\n      return new (__ngFactoryType__ || ProductosComponent)(i0.ÉµÉµdirectiveInject(i1.HttpClient), i0.ÉµÉµdirectiveInject(i2.AuthService), i0.ÉµÉµdirectiveInject(i3.SolicitudesService));\n    }, this.Éµcmp = /*@__PURE__*/i0.ÉµÉµdefineComponent({\n      type: ProductosComponent,\n      selectors: [[\"app-productos\"]],\n      decls: 26,\n      vars: 11,\n      consts: [[1, \"productos-page\"], [1, \"toolbar\"], [1, \"toolbar-left\"], [\"type\", \"text\", \"placeholder\", \"Buscar productos...\", \"name\", \"q\", 1, \"input\", 3, \"ngModelChange\", \"ngModel\"], [\"name\", \"filtro_categoria\", 1, \"select\", 3, \"ngModelChange\", \"ngModel\"], [3, \"ngValue\"], [3, \"ngValue\", 4, \"ngFor\", \"ngForOf\"], [1, \"toolbar-right\"], [\"type\", \"button\", 1, \"btn-secondary\", 3, \"click\"], [\"type\", \"button\", 1, \"btn-primary\", 3, \"click\"], [\"class\", \"btn-primary outline\", \"type\", \"button\", 3, \"click\", 4, \"ngIf\"], [1, \"section\"], [1, \"section-header\"], [1, \"section-subtitle\"], [\"class\", \"empty\", 4, \"ngIf\"], [\"class\", \"grid-cards\", 4, \"ngIf\"], [\"class\", \"section\", 4, \"ngIf\"], [\"class\", \"modal-overlay\", 3, \"click\", 4, \"ngIf\"], [\"type\", \"button\", 1, \"btn-primary\", \"outline\", 3, \"click\"], [1, \"empty\"], [1, \"grid-cards\"], [\"class\", \"card-producto\", 4, \"ngFor\", \"ngForOf\"], [1, \"card-producto\"], [\"class\", \"card-image\", 4, \"ngIf\"], [1, \"card-body\"], [1, \"categoria\"], [1, \"meta\"], [1, \"card-footer\"], [\"class\", \"btn-primary w-full\", \"type\", \"button\", 3, \"click\", 4, \"ngIf\"], [1, \"card-image\"], [3, \"src\", \"alt\"], [\"type\", \"button\", 1, \"btn-primary\", \"w-full\", 3, \"click\"], [\"class\", \"card-producto\", 3, \"inactivo\", 4, \"ngFor\", \"ngForOf\"], [1, \"estado\"], [1, \"card-footer\", \"flex-row\"], [\"type\", \"button\", 3, \"click\", \"ngClass\"], [1, \"modal-overlay\", 3, \"click\"], [1, \"form-card\", 3, \"click\"], [1, \"form-header\"], [\"type\", \"button\", 1, \"close\", 3, \"click\"], [1, \"form-grid\", 3, \"ngSubmit\"], [1, \"field\", \"full\"], [\"type\", \"text\", \"name\", \"titulo\", \"required\", \"\", 1, \"input\", 3, \"ngModelChange\", \"ngModel\"], [\"name\", \"descripcion\", \"required\", \"\", 1, \"textarea\", 3, \"ngModelChange\", \"ngModel\"], [1, \"field\", \"half\"], [\"name\", \"id_categoria\", \"required\", \"\", 1, \"select\", 3, \"ngModelChange\", \"ngModel\"], [\"disabled\", \"\", 3, \"ngValue\"], [\"type\", \"text\", \"name\", \"ubicacion\", \"placeholder\", \"Ciudad, Estado, Pa\\u00EDs\", \"required\", \"\", 1, \"input\", 3, \"ngModelChange\", \"ngModel\"], [\"type\", \"number\", \"min\", \"1\", \"step\", \"1\", \"name\", \"valor_estimado\", \"required\", \"\", 1, \"input\", 3, \"ngModelChange\", \"ngModel\"], [\"type\", \"file\", 1, \"input\", 3, \"change\"], [\"class\", \"field full\", 4, \"ngIf\"], [1, \"form-actions\"], [\"type\", \"submit\", 1, \"btn-primary\"], [1, \"preview-box\"], [\"alt\", \"Vista previa\", 3, \"src\"], [1, \"form-grid\"], [\"type\", \"text\", \"class\", \"input\", \"placeholder\", \"Buscar entre mis productos...\", \"name\", \"buscarMisProductos\", \"style\", \"margin-bottom: 0.5rem;\", 3, \"ngModel\", \"ngModelChange\", 4, \"ngIf\"], [\"class\", \"estado\", 4, \"ngIf\"], [\"style\", \"display: flex; gap: 0.75rem; overflow-x: auto; padding-bottom: 0.5rem;\", 4, \"ngIf\"], [\"class\", \"preview-box\", 4, \"ngIf\"], [4, \"ngIf\"], [\"type\", \"number\", \"min\", \"0\", \"step\", \"1\", \"name\", \"diferenciaPropuesta\", 1, \"input\", 3, \"ngModelChange\", \"ngModel\"], [\"name\", \"mensajeSolicitud\", \"rows\", \"3\", 1, \"textarea\", 3, \"ngModelChange\", \"ngModel\"], [\"type\", \"button\", 1, \"btn-secondary\", 3, \"click\", \"disabled\"], [\"type\", \"button\", 1, \"btn-primary\", 3, \"click\", \"disabled\"], [\"type\", \"text\", \"placeholder\", \"Buscar entre mis productos...\", \"name\", \"buscarMisProductos\", 1, \"input\", 2, \"margin-bottom\", \"0.5rem\", 3, \"ngModelChange\", \"ngModel\"], [2, \"display\", \"flex\", \"gap\", \"0.75rem\", \"overflow-x\", \"auto\", \"padding-bottom\", \"0.5rem\"], [\"class\", \"mini-card-producto\", 3, \"seleccionado\", \"click\", 4, \"ngFor\", \"ngForOf\"], [1, \"mini-card-producto\", 3, \"click\"], [1, \"mini-card-image\"], [1, \"mini-card-body\"], [1, \"mini-card-title\"], [1, \"mini-card-meta\"], [2, \"font-size\", \"0.95rem\", \"color\", \"#475569\", \"margin-bottom\", \"0.75rem\"], [\"type\", \"button\", 1, \"btn-warning\", 3, \"click\", \"disabled\"]],\n      template: function ProductosComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ÉµÉµelementStart(0, \"div\", 0)(1, \"section\", 1)(2, \"div\", 2)(3, \"input\", 3);\n          i0.ÉµÉµtwoWayListener(\"ngModelChange\", function ProductosComponent_Template_input_ngModelChange_3_listener($event) {\n            i0.ÉµÉµtwoWayBindingSet(ctx.busqueda, $event) || (ctx.busqueda = $event);\n            return $event;\n          });\n          i0.ÉµÉµelementEnd();\n          i0.ÉµÉµelementStart(4, \"select\", 4);\n          i0.ÉµÉµtwoWayListener(\"ngModelChange\", function ProductosComponent_Template_select_ngModelChange_4_listener($event) {\n            i0.ÉµÉµtwoWayBindingSet(ctx.categoriaSeleccionada, $event) || (ctx.categoriaSeleccionada = $event);\n            return $event;\n          });\n          i0.ÉµÉµelementStart(5, \"option\", 5);\n          i0.ÉµÉµtext(6, \"Todas las categor\\u00EDas\");\n          i0.ÉµÉµelementEnd();\n          i0.ÉµÉµtemplate(7, ProductosComponent_option_7_Template, 2, 2, \"option\", 6);\n          i0.ÉµÉµelementEnd()();\n          i0.ÉµÉµelementStart(8, \"div\", 7)(9, \"button\", 8);\n          i0.ÉµÉµlistener(\"click\", function ProductosComponent_Template_button_click_9_listener() {\n            return ctx.limpiarFiltros();\n          });\n          i0.ÉµÉµtext(10, \" Limpiar \");\n          i0.ÉµÉµelementEnd();\n          i0.ÉµÉµelementStart(11, \"button\", 9);\n          i0.ÉµÉµlistener(\"click\", function ProductosComponent_Template_button_click_11_listener() {\n            return ctx.onBuscar();\n          });\n          i0.ÉµÉµtext(12, \" Buscar \");\n          i0.ÉµÉµelementEnd();\n          i0.ÉµÉµtemplate(13, ProductosComponent_button_13_Template, 2, 0, \"button\", 10);\n          i0.ÉµÉµelementEnd()();\n          i0.ÉµÉµelementStart(14, \"section\", 11)(15, \"div\", 12)(16, \"h2\");\n          i0.ÉµÉµtext(17, \"Explorar productos\");\n          i0.ÉµÉµelementEnd();\n          i0.ÉµÉµelementStart(18, \"p\", 13);\n          i0.ÉµÉµtext(19, \" Explora productos publicados por otros usuarios. \");\n          i0.ÉµÉµelementEnd()();\n          i0.ÉµÉµtemplate(20, ProductosComponent_div_20_Template, 2, 0, \"div\", 14)(21, ProductosComponent_div_21_Template, 2, 1, \"div\", 15);\n          i0.ÉµÉµelementEnd();\n          i0.ÉµÉµtemplate(22, ProductosComponent_section_22_Template, 8, 2, \"section\", 16)(23, ProductosComponent_section_23_Template, 41, 10, \"section\", 17)(24, ProductosComponent_section_24_Template, 30, 10, \"section\", 17)(25, ProductosComponent_section_25_Template, 23, 7, \"section\", 17);\n          i0.ÉµÉµelementEnd();\n        }\n        if (rf & 2) {\n          i0.ÉµÉµadvance(3);\n          i0.ÉµÉµtwoWayProperty(\"ngModel\", ctx.busqueda);\n          i0.ÉµÉµadvance();\n          i0.ÉµÉµtwoWayProperty(\"ngModel\", ctx.categoriaSeleccionada);\n          i0.ÉµÉµadvance();\n          i0.ÉµÉµproperty(\"ngValue\", null);\n          i0.ÉµÉµadvance(2);\n          i0.ÉµÉµproperty(\"ngForOf\", ctx.categorias);\n          i0.ÉµÉµadvance(6);\n          i0.ÉµÉµproperty(\"ngIf\", ctx.isAuth);\n          i0.ÉµÉµadvance(7);\n          i0.ÉµÉµproperty(\"ngIf\", ctx.productosExplorar.length === 0);\n          i0.ÉµÉµadvance();\n          i0.ÉµÉµproperty(\"ngIf\", ctx.productosExplorar.length > 0);\n          i0.ÉµÉµadvance();\n          i0.ÉµÉµproperty(\"ngIf\", ctx.isAuth);\n          i0.ÉµÉµadvance();\n          i0.ÉµÉµproperty(\"ngIf\", ctx.isAuth && ctx.mostrarFormulario);\n          i0.ÉµÉµadvance();\n          i0.ÉµÉµproperty(\"ngIf\", ctx.isAuth && ctx.mostrarModalSolicitud);\n          i0.ÉµÉµadvance();\n          i0.ÉµÉµproperty(\"ngIf\", ctx.isAuth && ctx.mostrarConfirmarBaja && ctx.productoAConfirmarBaja);\n        }\n      },\n      dependencies: [CommonModule, i4.NgClass, i4.NgForOf, i4.NgIf, FormsModule, i5.ÉµNgNoValidate, i5.NgSelectOption, i5.ÉµNgSelectMultipleOption, i5.DefaultValueAccessor, i5.NumberValueAccessor, i5.SelectControlValueAccessor, i5.NgControlStatus, i5.NgControlStatusGroup, i5.RequiredValidator, i5.MinValidator, i5.NgModel, i5.NgForm],\n      styles: [\".productos-page[_ngcontent-%COMP%]{padding:2rem 1.5rem 3rem;max-width:1200px;margin:0 auto}.toolbar[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:1rem;justify-content:space-between;align-items:center;margin-bottom:1.5rem}.toolbar-left[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:.75rem;flex:1 1 300px}.toolbar-right[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:.5rem}.input[_ngcontent-%COMP%], .select[_ngcontent-%COMP%], .textarea[_ngcontent-%COMP%]{width:100%;padding:.6rem .8rem;border-radius:.6rem;border:1px solid #d0d7e2;font-size:.95rem;outline:none;transition:border-color .15s,box-shadow .15s;background-color:#fff}.input[_ngcontent-%COMP%]:focus, .select[_ngcontent-%COMP%]:focus, .textarea[_ngcontent-%COMP%]:focus{border-color:#00a89d;box-shadow:0 0 0 2px #00a89d26}.btn-primary[_ngcontent-%COMP%]{border:none;border-radius:999px;padding:.55rem 1.4rem;background-color:#00a89d;color:#fff;font-weight:600;cursor:pointer;font-size:.95rem;transition:background-color .15s,box-shadow .15s,transform .05s}.btn-primary[_ngcontent-%COMP%]:hover{background-color:#009285;box-shadow:0 6px 18px #00a89d40}.btn-primary[_ngcontent-%COMP%]:active{transform:translateY(1px)}.btn-primary.outline[_ngcontent-%COMP%]{background-color:transparent;color:#00a89d;border:1px solid #00a89d}.btn-secondary[_ngcontent-%COMP%]{border-radius:999px;padding:.55rem 1.2rem;border:1px solid #cbd5e1;background-color:#fff;color:#0f172a;font-size:.9rem;cursor:pointer}.btn-secondary[_ngcontent-%COMP%]:hover{background-color:#f8fafc}.btn-warning[_ngcontent-%COMP%]{border-radius:999px;padding:.55rem 1.2rem;border:none;background-color:#f97316;color:#fff;font-size:.9rem;cursor:pointer}.btn-warning[_ngcontent-%COMP%]:hover{background-color:#ea580c}.btn-success[_ngcontent-%COMP%]{border-radius:999px;padding:.55rem 1.2rem;border:none;background-color:#16a34a;color:#fff;font-size:.9rem;cursor:pointer;font-weight:500}.btn-success[_ngcontent-%COMP%]:hover{background-color:#15803d}.w-full[_ngcontent-%COMP%]{width:100%}.section[_ngcontent-%COMP%]{margin-top:2rem}.section-header[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.25rem;margin-bottom:1rem}.section-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.35rem;font-weight:700;color:#0f172a}.section-subtitle[_ngcontent-%COMP%]{font-size:.9rem;color:#64748b}.empty[_ngcontent-%COMP%]{padding:1rem 1.25rem;border-radius:.9rem;background-color:#f1f5f9;color:#64748b;font-size:.9rem}.grid-cards[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(230px,1fr));gap:1.25rem}.card-producto[_ngcontent-%COMP%]{border-radius:1.1rem;background-color:#fff;box-shadow:0 10px 25px #0f172a0f;overflow:hidden;display:flex;flex-direction:column}.card-image[_ngcontent-%COMP%]{padding:1rem 1rem 0;display:flex;align-items:center;justify-content:center;background-color:#f8fafc}.card-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;max-height:260px;object-fit:contain;border-radius:.9rem;display:block}.card-body[_ngcontent-%COMP%]{padding:.85rem 1rem .4rem}.card-body[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1rem;font-weight:600;color:#0f172a;margin-bottom:.25rem}.card-body[_ngcontent-%COMP%]   .categoria[_ngcontent-%COMP%]{font-size:.8rem;text-transform:uppercase;letter-spacing:.06em;color:#94a3b8}.card-body[_ngcontent-%COMP%]   .meta[_ngcontent-%COMP%]{margin-top:.35rem;font-size:.9rem;color:#475569}.card-body[_ngcontent-%COMP%]   .estado[_ngcontent-%COMP%]{margin-top:.3rem;font-size:.8rem;font-weight:500;color:#16a34a}.card-body[_ngcontent-%COMP%]   .estado.baja[_ngcontent-%COMP%]{color:#ef4444}.card-footer[_ngcontent-%COMP%]{padding:.75rem 1rem .9rem}.card-footer.flex-row[_ngcontent-%COMP%]{display:flex;gap:.5rem}.form-section[_ngcontent-%COMP%]{margin-top:2.5rem}.form-card[_ngcontent-%COMP%]{border-radius:1.2rem;background-color:#fff;box-shadow:0 14px 35px #0f172a1f;padding:1.4rem 1.6rem 1.6rem;max-width:750px;margin:0 auto}.form-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:1rem}.form-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.2rem;font-weight:700}.form-header[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]{border:none;background:transparent;cursor:pointer;font-size:1.1rem;color:#64748b}.form-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,minmax(0,1fr));gap:1rem 1.25rem}.field.full[_ngcontent-%COMP%]{grid-column:1 / -1}.field.half[_ngcontent-%COMP%]{grid-column:auto}.field[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:.3rem;font-size:.85rem;color:#475569}.preview-box[_ngcontent-%COMP%]{border-radius:.9rem;border:1px dashed #cbd5e1;padding:.75rem;display:inline-block}.preview-box[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:180px;max-height:180px;display:block;border-radius:.7rem}.form-actions[_ngcontent-%COMP%]{grid-column:1 / -1;display:flex;justify-content:flex-end;gap:.75rem;margin-top:.5rem}@media (max-width: 768px){.toolbar[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch}.toolbar-left[_ngcontent-%COMP%], .toolbar-right[_ngcontent-%COMP%]{width:100%}.form-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.card-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-height:220px}}.modal-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:#0f172a73;display:flex;align-items:center;justify-content:center;z-index:50}.form-card[_ngcontent-%COMP%]{max-width:750px;width:100%;max-height:90vh;overflow-y:auto}.card-producto.inactivo[_ngcontent-%COMP%]{opacity:.55;filter:grayscale(.3)}.mini-card-producto[_ngcontent-%COMP%]{min-width:140px;max-width:160px;border-radius:.9rem;background-color:#fff;box-shadow:0 6px 16px #0f172a14;cursor:pointer;overflow:hidden;border:1px solid transparent;transition:transform .1s,box-shadow .1s,border-color .1s}.mini-card-producto[_ngcontent-%COMP%]:hover{transform:translateY(-1px);box-shadow:0 10px 22px #0f172a24}.mini-card-producto.seleccionado[_ngcontent-%COMP%]{border-color:#00a89d;box-shadow:0 0 0 2px #00a89d40}.mini-card-image[_ngcontent-%COMP%]{background-color:#f8fafc;padding:.4rem;display:flex;align-items:center;justify-content:center}.mini-card-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:100%;max-height:90px;object-fit:contain;border-radius:.7rem}.mini-card-body[_ngcontent-%COMP%]{padding:.35rem .5rem .5rem}.mini-card-title[_ngcontent-%COMP%]{font-size:.8rem;font-weight:600;color:#0f172a;margin-bottom:.15rem}.mini-card-meta[_ngcontent-%COMP%]{font-size:.75rem;color:#64748b}\"]\n    }));\n  }\n  _staticBlock();\n  return ProductosComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}