{"ast":null,"code":"import { CommonModule } from \"@angular/common\";\nimport { RouterModule } from \"@angular/router\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../../services/intercambios.service\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"@angular/common\";\nfunction IntercambiosEnProcesoComponent_div_0_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 3);\n    i0.ɵɵtext(1, \" Cargando intercambios...\\n\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction IntercambiosEnProcesoComponent_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 4);\n    i0.ɵɵtext(1, \" No tienes intercambios en proceso.\\n\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction IntercambiosEnProcesoComponent_div_2_div_1_img_5_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"img\", 22);\n  }\n  if (rf & 2) {\n    const i_r2 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵproperty(\"src\", i_r2.producto_ofrece == null ? null : i_r2.producto_ofrece.imagen, i0.ɵɵsanitizeUrl);\n  }\n}\nfunction IntercambiosEnProcesoComponent_div_2_div_1_img_11_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"img\", 23);\n  }\n  if (rf & 2) {\n    const i_r2 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵproperty(\"src\", i_r2.producto_objetivo == null ? null : i_r2.producto_objetivo.imagen, i0.ɵɵsanitizeUrl);\n  }\n}\nfunction IntercambiosEnProcesoComponent_div_2_div_1_div_20_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 24);\n    i0.ɵɵtext(1, \" Diferencia propuesta: \");\n    i0.ɵɵelementStart(2, \"strong\");\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const i_r2 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\"$\", i_r2.diferencia_monetaria);\n  }\n}\nfunction IntercambiosEnProcesoComponent_div_2_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r1 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 7)(1, \"div\", 8)(2, \"div\", 9)(3, \"h4\", 10);\n    i0.ɵɵtext(4, \"T\\u00FA ofreces:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(5, IntercambiosEnProcesoComponent_div_2_div_1_img_5_Template, 1, 1, \"img\", 11);\n    i0.ɵɵelementStart(6, \"p\", 12);\n    i0.ɵɵtext(7);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(8, \"div\", 9)(9, \"h4\", 10);\n    i0.ɵɵtext(10, \"T\\u00FA quieres:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(11, IntercambiosEnProcesoComponent_div_2_div_1_img_11_Template, 1, 1, \"img\", 13);\n    i0.ɵɵelementStart(12, \"p\", 12);\n    i0.ɵɵtext(13);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(14, \"div\", 14)(15, \"div\", 15)(16, \"div\", 16);\n    i0.ɵɵtext(17);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(18, \"div\", 17);\n    i0.ɵɵtext(19);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵtemplate(20, IntercambiosEnProcesoComponent_div_2_div_1_div_20_Template, 4, 1, \"div\", 18);\n    i0.ɵɵelementStart(21, \"div\", 19)(22, \"button\", 20);\n    i0.ɵɵlistener(\"click\", function IntercambiosEnProcesoComponent_div_2_div_1_Template_button_click_22_listener() {\n      const i_r2 = i0.ɵɵrestoreView(_r1).$implicit;\n      const ctx_r2 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r2.verChat(i_r2));\n    });\n    i0.ɵɵtext(23, \" Chatear para acordar el intercambio \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(24, \"button\", 21);\n    i0.ɵɵlistener(\"click\", function IntercambiosEnProcesoComponent_div_2_div_1_Template_button_click_24_listener() {\n      const i_r2 = i0.ɵɵrestoreView(_r1).$implicit;\n      const ctx_r2 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r2.cancelar(i_r2));\n    });\n    i0.ɵɵtext(25, \" Cancelar este intercambio \");\n    i0.ɵɵelementEnd()()()()();\n  }\n  if (rf & 2) {\n    const i_r2 = ctx.$implicit;\n    i0.ɵɵadvance(5);\n    i0.ɵɵproperty(\"ngIf\", i_r2.producto_ofrece == null ? null : i_r2.producto_ofrece.imagen);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" \", (i_r2.producto_ofrece == null ? null : i_r2.producto_ofrece.titulo) || \"Solo diferencia en dinero\", \" \");\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngIf\", i_r2.producto_objetivo == null ? null : i_r2.producto_objetivo.imagen);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" \", i_r2.producto_objetivo == null ? null : i_r2.producto_objetivo.titulo, \" \");\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate1(\" \", i_r2.otro == null ? null : i_r2.otro.nombre, \" \");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" Estado: \", i_r2.estado, \" \");\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", i_r2.diferencia_monetaria && i_r2.diferencia_monetaria !== \"0.00\");\n  }\n}\nfunction IntercambiosEnProcesoComponent_div_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 5);\n    i0.ɵɵtemplate(1, IntercambiosEnProcesoComponent_div_2_div_1_Template, 26, 7, \"div\", 6);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngForOf\", ctx_r2.intercambios);\n  }\n}\nexport let IntercambiosEnProcesoComponent = /*#__PURE__*/(() => {\n  var _staticBlock;\n  class IntercambiosEnProcesoComponent {\n    constructor(intercambiosService, router) {\n      this.intercambiosService = intercambiosService;\n      this.router = router;\n      this.intercambios = [];\n      this.cargando = false;\n    }\n    ngOnInit() {\n      this.cargar();\n    }\n    cargar() {\n      this.cargando = true;\n      this.intercambiosService.listarEnProceso().subscribe({\n        next: res => {\n          this.intercambios = res;\n          this.cargando = false;\n        },\n        error: () => this.cargando = false\n      });\n    }\n    verChat(i) {\n      this.router.navigate([\"/intercambios\", i.id_intercambio]);\n    }\n    cancelar(i) {\n      if (!confirm(\"¿Seguro que quieres cancelar este intercambio?\")) return;\n      this.intercambiosService.cancelar(i.id_intercambio).subscribe({\n        next: () => this.cargar()\n      });\n    }\n    static #_ = _staticBlock = () => (this.ɵfac = function IntercambiosEnProcesoComponent_Factory(__ngFactoryType__) {\n      return new (__ngFactoryType__ || IntercambiosEnProcesoComponent)(i0.ɵɵdirectiveInject(i1.IntercambiosService), i0.ɵɵdirectiveInject(i2.Router));\n    }, this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: IntercambiosEnProcesoComponent,\n      selectors: [[\"app-intercambios-en-proceso\"]],\n      decls: 3,\n      vars: 3,\n      consts: [[\"class\", \"loading\", 4, \"ngIf\"], [\"class\", \"empty\", 4, \"ngIf\"], [\"class\", \"intercambios-lista\", 4, \"ngIf\"], [1, \"loading\"], [1, \"empty\"], [1, \"intercambios-lista\"], [\"class\", \"card\", 4, \"ngFor\", \"ngForOf\"], [1, \"card\"], [1, \"card-main\"], [1, \"col-producto\"], [1, \"titulo-col\"], [\"class\", \"producto-img\", \"alt\", \"Producto que ofreces\", 3, \"src\", 4, \"ngIf\"], [1, \"producto-nombre\"], [\"class\", \"producto-img\", \"alt\", \"Producto objetivo\", 3, \"src\", 4, \"ngIf\"], [1, \"col-info\"], [1, \"usuario-header\"], [1, \"usuario-nombre\"], [1, \"estado-tag\"], [\"class\", \"diferencia\", 4, \"ngIf\"], [1, \"acciones\"], [1, \"btn\", \"btn-chat\", 3, \"click\"], [1, \"btn\", \"btn-cancelar\", 3, \"click\"], [\"alt\", \"Producto que ofreces\", 1, \"producto-img\", 3, \"src\"], [\"alt\", \"Producto objetivo\", 1, \"producto-img\", 3, \"src\"], [1, \"diferencia\"]],\n      template: function IntercambiosEnProcesoComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵtemplate(0, IntercambiosEnProcesoComponent_div_0_Template, 2, 0, \"div\", 0)(1, IntercambiosEnProcesoComponent_div_1_Template, 2, 0, \"div\", 1)(2, IntercambiosEnProcesoComponent_div_2_Template, 2, 1, \"div\", 2);\n        }\n        if (rf & 2) {\n          i0.ɵɵproperty(\"ngIf\", ctx.cargando);\n          i0.ɵɵadvance();\n          i0.ɵɵproperty(\"ngIf\", !ctx.cargando && ctx.intercambios.length === 0);\n          i0.ɵɵadvance();\n          i0.ɵɵproperty(\"ngIf\", !ctx.cargando && ctx.intercambios.length > 0);\n        }\n      },\n      dependencies: [CommonModule, i3.NgForOf, i3.NgIf, RouterModule],\n      styles: [\".loading[_ngcontent-%COMP%], .empty[_ngcontent-%COMP%]{max-width:1100px;margin:40px auto;text-align:center;font-size:1.1rem;color:#555}.intercambios-lista[_ngcontent-%COMP%]{max-width:1100px;margin:30px auto;display:flex;flex-direction:column;gap:20px}.card[_ngcontent-%COMP%]{background-color:#fff;border-radius:14px;padding:18px 24px;box-shadow:0 4px 14px #0000000f}.card-main[_ngcontent-%COMP%]{display:flex;gap:24px;align-items:stretch}.col-producto[_ngcontent-%COMP%]{flex:0 0 260px;text-align:center}.titulo-col[_ngcontent-%COMP%]{margin-bottom:8px;font-size:.95rem;font-weight:600;color:#333}.producto-img[_ngcontent-%COMP%]{width:100%;max-height:220px;object-fit:contain;border-radius:10px;border:1px solid #eee;background:#fafafa}.producto-nombre[_ngcontent-%COMP%]{margin-top:8px;font-size:.95rem;color:#333}.col-info[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;justify-content:space-between}.usuario-header[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:4px;margin-bottom:10px}.usuario-nombre[_ngcontent-%COMP%]{font-weight:700;font-size:1.05rem;color:#222}.estado-tag[_ngcontent-%COMP%]{display:inline-block;padding:4px 10px;border-radius:999px;background:#fff3cd;color:#856404;font-size:.8rem;width:fit-content}.diferencia[_ngcontent-%COMP%]{margin:10px 0 18px;font-size:.95rem;color:#444}.acciones[_ngcontent-%COMP%]{margin-top:auto;display:flex;flex-direction:column;gap:10px;max-width:320px}.btn[_ngcontent-%COMP%]{border:none;border-radius:999px;padding:10px 16px;font-size:.9rem;font-weight:600;cursor:pointer;transition:transform .1s ease,box-shadow .1s ease,background .1s ease}.btn-chat[_ngcontent-%COMP%]{background:#28a745;color:#fff;box-shadow:0 2px 8px #28a74566}.btn-chat[_ngcontent-%COMP%]:hover{background:#218838;transform:translateY(-1px)}.btn-cancelar[_ngcontent-%COMP%]{background:#f8d7da;color:#721c24}.btn-cancelar[_ngcontent-%COMP%]:hover{background:#f5c6cb;transform:translateY(-1px)}@media (max-width: 900px){.card-main[_ngcontent-%COMP%]{flex-direction:column}.col-producto[_ngcontent-%COMP%]{flex:1 1 auto}.acciones[_ngcontent-%COMP%]{max-width:100%}}\"]\n    }));\n  }\n  _staticBlock();\n  return IntercambiosEnProcesoComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}